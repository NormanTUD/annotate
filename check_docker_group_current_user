#!/bin/bash

CURRENT_USER=$(whoami)

if ! getent group docker >/dev/null; then
	echo "Fehler: Die Gruppe 'docker' existiert nicht. Bitte Docker installieren."
	exit 1
fi

if id -nG "$CURRENT_USER" | grep -qw docker; then
	true
else
	echo "Fehler: $CURRENT_USER ist kein Mitglied der docker-Gruppe."
	echo "FÃ¼ge den User hinzu mit folgendem Befehl:"
	echo "    sudo usermod -aG docker $CURRENT_USER"
	echo "Danach musst du dich ab- und wieder anmelden oder den Webserver neu starten."
	exit 1
fi

if ! docker info 2>/dev/null >/dev/null; then
	echo "Fehler: Docker kann vom User $CURRENT_USER nicht benutzt werden."
	exit 1
fi

exit 0

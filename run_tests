#!/bin/bash

source tests/php_syntax_check

bash -n *.sh
exit_code=$?

if [[ $exit_code -ne 0 ]]; then
	echo "Some bash scripts had syntax errors"
	exit 1
fi

bash docker.sh --local-port 9912 --instance-name annotate_test
exit_code=$?

if [[ $exit_code -ne 0 ]]; then
	echo "bash docker.sh --local-port 9912 --instance-name annotate_test failed with exit code $exit_code"
	exit $exit_code
fi

echo "Waiting 10 seconds before continuing..."
sleep 10

bash tests/empty_page
exit_code=$?
if [[ $exit_code -ne 0 ]]; then
	echo "bash tests/empty_page failed with exit_code $exit_code"
	exit 1
fi


bash tests/upload_model
exit_code=$?
if [[ $exit_code -ne 0 ]]; then
	echo "bash tests/upload_model failed with exit_code $exit_code"
	exit 1
fi

source tests/venv

source tests/linkchecker

source tests/playwright
